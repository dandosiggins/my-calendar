<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Interactive Calendar</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/lucide-react@0.263.1/dist/umd/lucide-react.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
            background-color: #f5f5f5;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useMemo } = React;
        const { ChevronLeft, ChevronRight, Plus, Edit, Trash2, Calendar } = lucideReact;

        const InteractiveCalendar = () => {
            const [currentDate, setCurrentDate] = useState(new Date());
            const [events, setEvents] = useState(() => {
                // Load events from localStorage
                const saved = localStorage.getItem('calendarEvents');
                return saved ? JSON.parse(saved) : {};
            });
            const [selectedDate, setSelectedDate] = useState(null);
            const [showEventModal, setShowEventModal] = useState(false);
            const [editingEvent, setEditingEvent] = useState(null);
            const [eventForm, setEventForm] = useState({
                title: '',
                time: '',
                description: ''
            });

            const monthNames = [
                'January', 'February', 'March', 'April', 'May', 'June',
                'July', 'August', 'September', 'October', 'November', 'December'
            ];

            const weekDays = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];

            const getDaysInMonth = (date) => {
                return new Date(date.getFullYear(), date.getMonth() + 1, 0).getDate();
            };

            const getFirstDayOfMonth = (date) => {
                return new Date(date.getFullYear(), date.getMonth(), 1).getDay();
            };

            const formatDateKey = (year, month, day) => {
                return `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
            };

            // Save events to localStorage whenever events change
            const saveEventsToStorage = (newEvents) => {
                localStorage.setItem('calendarEvents', JSON.stringify(newEvents));
                setEvents(newEvents);
            };

            const calendarDays = useMemo(() => {
                const daysInMonth = getDaysInMonth(currentDate);
                const firstDay = getFirstDayOfMonth(currentDate);
                const days = [];

                for (let i = 0; i < firstDay; i++) {
                    days.push(null);
                }

                for (let day = 1; day <= daysInMonth; day++) {
                    days.push(day);
                }

                return days;
            }, [currentDate]);

            const navigateMonth = (direction) => {
                setCurrentDate(prev => {
                    const newDate = new Date(prev);
                    newDate.setMonth(prev.getMonth() + direction);
                    return newDate;
                });
            };

            const openEventModal = (day) => {
                const dateKey = formatDateKey(currentDate.getFullYear(), currentDate.getMonth(), day);
                setSelectedDate(dateKey);
                setEventForm({ title: '', time: '', description: '' });
                setEditingEvent(null);
                setShowEventModal(true);
            };

            const editEvent = (dateKey, eventIndex) => {
                const event = events[dateKey][eventIndex];
                setSelectedDate(dateKey);
                setEventForm({ ...event });
                setEditingEvent(eventIndex);
                setShowEventModal(true);
            };

            const saveEvent = () => {
                if (!eventForm.title.trim()) return;

                const newEvents = { ...events };
                if (!newEvents[selectedDate]) {
                    newEvents[selectedDate] = [];
                }

                if (editingEvent !== null) {
                    newEvents[selectedDate][editingEvent] = { ...eventForm };
                } else {
                    newEvents[selectedDate].push({ ...eventForm });
                }

                saveEventsToStorage(newEvents);
                setShowEventModal(false);
                setEventForm({ title: '', time: '', description: '' });
                setEditingEvent(null);
            };

            const deleteEvent = (dateKey, eventIndex) => {
                const newEvents = { ...events };
                newEvents[dateKey].splice(eventIndex, 1);
                if (newEvents[dateKey].length === 0) {
                    delete newEvents[dateKey];
                }
                saveEventsToStorage(newEvents);
            };

            const getDayEvents = (day) => {
                if (!day) return [];
                const dateKey = formatDateKey(currentDate.getFullYear(), currentDate.getMonth(), day);
                return events[dateKey] || [];
            };

            const isToday = (day) => {
                const today = new Date();
                return day &&
                       currentDate.getFullYear() === today.getFullYear() &&
                       currentDate.getMonth() === today.getMonth() &&
                       day === today.getDate();
            };

            return React.createElement('div', {
                className: "max-w-4xl mx-auto p-6 bg-white rounded-lg shadow-lg"
            }, [
                // Header
                React.createElement('div', {
                    key: 'header',
                    className: "flex items-center justify-between mb-6"
                }, [
                    React.createElement('div', {
                        key: 'title',
                        className: "flex items-center gap-2"
                    }, [
                        React.createElement(Calendar, {
                            key: 'icon',
                            className: "w-6 h-6 text-blue-600"
                        }),
                        React.createElement('h1', {
                            key: 'title-text',
                            className: "text-2xl font-bold text-gray-800"
                        }, 'My Calendar')
                    ]),
                    React.createElement('div', {
                        key: 'nav',
                        className: "flex items-center gap-4"
                    }, [
                        React.createElement('button', {
                            key: 'prev',
                            onClick: () => navigateMonth(-1),
                            className: "p-2 hover:bg-gray-100 rounded-full transition-colors"
                        }, React.createElement(ChevronLeft, { className: "w-5 h-5" })),
                        React.createElement('h2', {
                            key: 'month-year',
                            className: "text-xl font-semibold text-gray-700 min-w-48 text-center"
                        }, `${monthNames[currentDate.getMonth()]} ${currentDate.getFullYear()}`),
                        React.createElement('button', {
                            key: 'next',
                            onClick: () => navigateMonth(1),
                            className: "p-2 hover:bg-gray-100 rounded-full transition-colors"
                        }, React.createElement(ChevronRight, { className: "w-5 h-5" }))
                    ])
                ]),

                // Calendar Grid
                React.createElement('div', {
                    key: 'calendar',
                    className: "grid grid-cols-7 gap-1 mb-4"
                }, [
                    // Week headers
                    ...weekDays.map(day => 
                        React.createElement('div', {
                            key: day,
                            className: "p-3 text-center font-semibold text-gray-600 bg-gray-50"
                        }, day)
                    ),

                    // Calendar days
                    ...calendarDays.map((day, index) => {
                        const dayEvents = getDayEvents(day);
                        const todayClass = isToday(day) ? 'bg-blue-100 border-blue-300' : '';
                        
                        return React.createElement('div', {
                            key: `day-${index}`,
                            className: `min-h-24 border border-gray-200 p-2 ${todayClass} ${
                                day ? 'hover:bg-gray-50 cursor-pointer' : 'bg-gray-50'
                            }`,
                            onClick: () => day && openEventModal(day)
                        }, day ? [
                            React.createElement('div', {
                                key: 'day-number',
                                className: "font-medium text-gray-700 mb-1"
                            }, day),
                            React.createElement('div', {
                                key: 'events',
                                className: "space-y-1"
                            }, [
                                ...dayEvents.slice(0, 2).map((event, eventIndex) =>
                                    React.createElement('div', {
                                        key: `event-${eventIndex}`,
                                        className: "text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded truncate flex items-center justify-between group",
                                        onClick: (e) => e.stopPropagation()
                                    }, [
                                        React.createElement('span', {
                                            key: 'event-title',
                                            className: "truncate"
                                        }, event.title),
                                        React.createElement('div', {
                                            key: 'event-actions',
                                            className: "hidden group-hover:flex gap-1"
                                        }, [
                                            React.createElement('button', {
                                                key: 'edit-btn',
                                                onClick: (e) => {
                                                    e.stopPropagation();
                                                    editEvent(formatDateKey(currentDate.getFullYear(), currentDate.getMonth(), day), eventIndex);
                                                },
                                                className: "p-1 hover:bg-blue-200 rounded"
                                            }, React.createElement(Edit, { className: "w-3 h-3" })),
                                            React.createElement('button', {
                                                key: 'delete-btn',
                                                onClick: (e) => {
                                                    e.stopPropagation();
                                                    deleteEvent(formatDateKey(currentDate.getFullYear(), currentDate.getMonth(), day), eventIndex);
                                                },
                                                className: "p-1 hover:bg-red-200 rounded text-red-600"
                                            }, React.createElement(Trash2, { className: "w-3 h-3" }))
                                        ])
                                    ])
                                ),
                                dayEvents.length > 2 ? React.createElement('div', {
                                    key: 'more-events',
                                    className: "text-xs text-gray-500"
                                }, `+${dayEvents.length - 2} more`) : null
                            ])
                        ] : null);
                    })
                ]),

                // Event Modal
                showEventModal ? React.createElement('div', {
                    key: 'modal',
                    className: "fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"
                }, React.createElement('div', {
                    className: "bg-white rounded-lg p-6 w-96 max-w-90vw"
                }, [
                    React.createElement('h3', {
                        key: 'modal-title',
                        className: "text-lg font-semibold mb-4"
                    }, editingEvent !== null ? 'Edit Event' : 'Add New Event'),
                    
                    React.createElement('div', {
                        key: 'form',
                        className: "space-y-4"
                    }, [
                        React.createElement('div', {
                            key: 'title-field'
                        }, [
                            React.createElement('label', {
                                key: 'title-label',
                                className: "block text-sm font-medium text-gray-700 mb-1"
                            }, 'Event Title *'),
                            React.createElement('input', {
                                key: 'title-input',
                                type: "text",
                                value: eventForm.title,
                                onChange: (e) => setEventForm(prev => ({ ...prev, title: e.target.value })),
                                className: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",
                                placeholder: "Enter event title"
                            })
                        ]),

                        React.createElement('div', {
                            key: 'time-field'
                        }, [
                            React.createElement('label', {
                                key: 'time-label',
                                className: "block text-sm font-medium text-gray-700 mb-1"
                            }, 'Time'),
                            React.createElement('input', {
                                key: 'time-input',
                                type: "time",
                                value: eventForm.time,
                                onChange: (e) => setEventForm(prev => ({ ...prev, time: e.target.value })),
                                className: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                            })
                        ]),

                        React.createElement('div', {
                            key: 'desc-field'
                        }, [
                            React.createElement('label', {
                                key: 'desc-label',
                                className: "block text-sm font-medium text-gray-700 mb-1"
                            }, 'Description'),
                            React.createElement('textarea', {
                                key: 'desc-input',
                                value: eventForm.description,
                                onChange: (e) => setEventForm(prev => ({ ...prev, description: e.target.value })),
                                rows: "3",
                                className: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",
                                placeholder: "Enter event description"
                            })
                        ])
                    ]),

                    React.createElement('div', {
                        key: 'buttons',
                        className: "flex gap-3 mt-6"
                    }, [
                        React.createElement('button', {
                            key: 'save-btn',
                            onClick: saveEvent,
                            disabled: !eventForm.title.trim(),
                            className: "flex-1 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors"
                        }, editingEvent !== null ? 'Update Event' : 'Save Event'),
                        React.createElement('button', {
                            key: 'cancel-btn',
                            onClick: () => setShowEventModal(false),
                            className: "flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-400 transition-colors"
                        }, 'Cancel')
                    ])
                ])) : null
            ]);
        };

        ReactDOM.render(React.createElement(InteractiveCalendar), document.getElementById('root'));
    </script>
</body>
</html>
